FalconLLM是AbuDhabi技术创新研究所(TechnologyInnovationInstitute，TII)开发的开源模型，于2023年5月投放市场。它是一个自回归、具有仅解码器的transformer，在1万亿个词元上进行训练，拥有400亿个参数（不过它也发布了拥有70亿个参数的精简版）。正如第3章所讨论的，“小型”语言模型代表了大规模语言模型的新发展趋势，即构建更轻量级的模型（参数更少），从而将重点放在了训练数据集的质量上。

可以按照以下步骤在ollama中启用FalconLLM。

**1. 使用Python的requests库与Ollama的REST API交互：**

```python
import requests
import json

def llm(prompt: str, model="falcon:7b") -> str:
    """调用Falcon模型生成回答"""
    endpoint = "http://localhost:11434/api/generate"
    payload = {
        "model": model,
        "prompt": prompt,
        "stream": False  # 关闭流式输出获取完整响应
    }
    
    try:
        response = requests.post(
            url=endpoint,
            data=json.dumps(payload),
            headers={"Content-Type":"application/json"},
            timeout=120  # 增加超时时间
        )
        response.raise_for_status()
        return response.json()["response"]
    
    except requests.exceptions.RequestException as e:
        print(f"API请求失败: {e}")
        return ""
```

**2. 现在已经完成了模型的初始化, 接下来让它生成一个简单网页对应的代码:**

```python
prompt = """
生成一个简短的html代码到一个简单的网页，有一个标题，一个子标题和一个文本主体。<!DOCTYPE html><html>
"""
print(llm(prompt))
```
相应的输出结果如下:

```html
<html>
  <head>
    <title>Example</title>
  </head>
  <body>
    <h1>Example Title</h1>
    <p>Example text.</p>
    <p>Example text with a <strong>italicized</strong> word. This text has an <b>italicized</b> word.</p>
    <p>Example text with a <strong>bolded</strong> word.</p>
  </body>
</html>
```

**3. 如果将其保存为 HTML 文件并执行, 结果将如图 9.3 所示。**

<p align="center">
<img src="/img/2.3.png" >
</p>

**4. 还可以尝试生成一个Python函数来生成随机密码：**
```python
prompt = """
Generate a python program that create random password with length of 12 characters, 3 numbers, one capital letter.
"""
print(llm(prompt))
```

下面是输出结果：
```bash
import random
def generate_password():
	min_length = 3
	max_length = 12
	letters = (randint(min_length + 1, max_length + 1) for _ in range(3))
	numbers = (randint(min_length + 1, max_length + 1) for _ in range(3))
	cap = random.choice(letters)
	password = ""
	for i in range(min_length, max_length):
		password += cap + letters[i]
	return password

# Sample usage:
generate_password()
print(generate_password())
```

现在有了一个名为generate_password()的函数，它使用随机函数按照提示来生成密码。

**5. 最后，反其道而行之，要求模型解释上述代码：**
```python
prompt = """
Explain the following code:

import random
def generate_password():
	min_length = 3
	max_length = 12
	letters = (randint(min_length + 1, max_length + 1) for _ in range(3))
	numbers = (randint(min_length + 1, max_length + 1) for _ in range(3))
	cap = random.choice(letters)
	password = ""
	for i in range(min_length, max_length):
		password += cap + letters[i]
	return password

# Sample usage:
generate_password()
print(generate_password())

"""
print(llm(prompt))
```


下面是得到的输出结果：
><p>The code generates a random string of characters, which is then used to generate a password. The length of the password is between 3 and 12 characters long, and a random selection of letters and numbers are generated to create a unique password. The password is then returned to the user.</p>


总的来说，即使不使用特定代码，模型也能正确完成所有任务。还要注意的是，这是模型的“轻量”版本(包含70亿个参数)，但其性能却非常出色。