## FAISS快速入门
利用向量数据库，可快速得到和查询内容相似结果（Top-K 个相似结果, Faiss 使用 C++ 开发，并提供了 Python 接口，可以通过 pip 安装 Faiss 库

### 1.环境依赖及说明
本节中的开发环境中所需如下 Python 库：
| 库名称       | 用途说明                         |
| --------- | ---------------------------- |
| **faiss** | 向量数据库核心库，用于构建索引与执行相似性搜索      |
| **numpy** | 数值计算库，用于处理向量数据，如生成/转换/归一化等操作 |

### 2.构建本地向量数据库
```python
from ollama import Client
import numpy as np
import faiss

client = Client(host='http://localhost:11434')
 
def get_embedding(text, model="dengcao/Qwen3-Embedding-8B:Q5_K_M"):
    response = client.embeddings(model=model, prompt=text)
    return np.array(response['embedding'], dtype=np.float32)

# 创建索引
dimension = 4096 
index = faiss.IndexFlatL2(dimension)

# 准备向量数据
knowledge =["神经网络原理", "深度学习框架", "大模型训练"]
knowledge_vectors = np.array([get_embedding(k) for k in knowledge], dtype='float32')
# 添加向量
index.add(knowledge_vectors)
print("数据库中共有向量：", index.ntotal)
 
# 查询相似度
query = "AI模型训练"
query_vec = get_embedding(query)
distances, indices = index.search(np.array([query_vec]), k=2)
print("查询向量：", query)
for i,j in enumerate(indices[0]):
    print("相似向量：{} \t 相似距离为：{}".format(knowledge[j],distances[0][i]))

- 输出文本向量示例：

```python
数据库中共有向量： 3
查询向量： AI模型训练
相似向量：大模型训练     相似距离为：2819.495361328125
相似向量：神经网络原理   相似距离为：13364.576171875
```

### 3.FAISS关键组件解析

| 代码部分                     | 功能说明                     |
| ------------------------ | ------------------------ |
| `faiss.IndexFlatL2(dim)` | 创建一个基于欧几里得距离的向量索引（最常用）   |
| `.add(vectors)`          | 将向量加入数据库                 |
| `.search(query, k)`      | 对查询向量执行相似度搜索，返回Top-k 个向量 |
| `distances, indices`     | 返回相似向量的距离值和在数据库中的位置索引    |

### 4.索引类型对比
| 索引类型 | 特点 | 适用场景 |
|----------|------|----------|
| IndexFlatL2 | 精准查询 | 小型数据集 |
| IndexIVFFlat | 加速查询 | 百万级数据 |
| IndexHNSW | 高效近邻 | 十亿级数据 |

### 5. 应用场景
该代码逻辑可直接应用于如下场景：

* **智能问答系统（RAG）**：用户问题转化为向量后，检索知识库中最相关的答案段落
* **语义搜索引擎**：实现“按意思”搜索，而非关键词匹配
* **个性化推荐**：找出相似行为/喜好用户进行内容推荐
